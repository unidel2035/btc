<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BTC Trading Bot Dashboard</title>
    <link rel="stylesheet" href="/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/i18next@23.7.11/i18next.min.js"></script>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  </head>
  <body>
    <div class="app">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <div class="logo">
          <h2>üìä Trading Bot</h2>
          <div class="language-switcher">
            <button id="langSwitcher" class="lang-btn" title="Switch language / –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫">
              <span id="currentLang">EN</span>
            </button>
          </div>
        </div>
        <nav class="nav">
          <a href="#dashboard" class="nav-item active" data-page="dashboard">
            <span class="icon">üìà</span>
            <span data-i18n="nav.dashboard">Dashboard</span>
          </a>
          <a href="#signals" class="nav-item" data-page="signals">
            <span class="icon">üì°</span>
            <span data-i18n="nav.signals">Signals</span>
            <span id="newSignalsBadge" class="badge" style="display: none; margin-left: 8px; background: #e53e3e; color: white; border-radius: 10px; padding: 2px 6px; font-size: 0.75rem;">0</span>
          </a>
          <a href="#positions" class="nav-item" data-page="positions">
            <span class="icon">üíº</span>
            <span data-i18n="nav.positions">Positions</span>
          </a>
          <a href="#news" class="nav-item" data-page="news">
            <span class="icon">üì∞</span>
            <span data-i18n="nav.news">News Feed</span>
          </a>
          <a href="#analytics" class="nav-item" data-page="analytics">
            <span class="icon">üìä</span>
            <span data-i18n="nav.analytics">Analytics</span>
          </a>
          <a href="#chart" class="nav-item" data-page="chart">
            <span class="icon">üìà</span>
            <span data-i18n="nav.chart">Strategy Chart</span>
          </a>
          <a href="#settings" class="nav-item" data-page="settings">
            <span class="icon">‚öôÔ∏è</span>
            <span data-i18n="nav.settings">Settings</span>
          </a>
        </nav>
        <div class="sidebar-footer">
          <div class="connection-status">
            <span class="status-dot" id="wsStatus"></span>
            <span id="wsStatusText" data-i18n="status.connecting">Connecting...</span>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Dashboard Page -->
        <div class="page active" id="dashboard-page">
          <div class="page-header">
            <h1 data-i18n="dashboard.title">Dashboard</h1>
            <p data-i18n="dashboard.subtitle">Real-time overview of your trading bot performance</p>
          </div>

          <!-- Metrics Cards -->
          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.balance">Balance</div>
              <div class="metric-value" id="balance">$0.00</div>
              <div class="metric-change" id="balanceChange">+0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.equity">Equity</div>
              <div class="metric-value" id="equity">$0.00</div>
              <div class="metric-change" id="equityChange">+0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.pnl">PnL</div>
              <div class="metric-value" id="pnl">$0.00</div>
              <div class="metric-change" id="pnlPercent">0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.winRate">Win Rate</div>
              <div class="metric-value" id="winRate">0%</div>
              <div class="metric-change" id="totalTrades">0 <span data-i18n="metrics.totalTrades">trades</span></div>
            </div>
          </div>

          <!-- Charts -->
          <div class="charts-grid">
            <div class="chart-card">
              <h3 data-i18n="dashboard.equityChart">Equity Chart</h3>
              <canvas id="equityChart"></canvas>
            </div>
            <div class="chart-card">
              <h3 data-i18n="dashboard.openPositions">Open Positions</h3>
              <div id="dashboardPositions" class="positions-list"></div>
            </div>
          </div>

          <!-- Recent Signals -->
          <div class="card">
            <h3 data-i18n="dashboard.recentSignals">Recent Signals</h3>
            <div id="recentSignals" class="signals-list"></div>
          </div>
        </div>

        <!-- Signals Page -->
        <div class="page" id="signals-page">
          <div class="page-header">
            <h1 data-i18n="signals.title">Trading Signals</h1>
            <p data-i18n="signals.subtitle">Real-time signal feed from all strategies</p>
          </div>

          <div class="filters">
            <select id="signalTypeFilter">
              <option value="all" data-i18n="signals.allTypes">All Types</option>
              <option value="NEWS_MOMENTUM">News Momentum</option>
              <option value="SENTIMENT_SWING">Sentiment Swing</option>
              <option value="TECHNICAL">Technical</option>
              <option value="EVENT_DRIVEN">Event Driven</option>
            </select>
            <select id="signalActionFilter">
              <option value="all" data-i18n="signals.allActions">All Actions</option>
              <option value="BUY" data-i18n="signals.buy">Buy</option>
              <option value="SELL" data-i18n="signals.sell">Sell</option>
              <option value="HOLD" data-i18n="signals.hold">Hold</option>
            </select>
          </div>

          <div id="signalsList" class="signals-feed"></div>
        </div>

        <!-- Positions Page -->
        <div class="page" id="positions-page">
          <div class="page-header">
            <h1 data-i18n="positions.title">Positions</h1>
            <p data-i18n="positions.subtitle">Manage your open positions</p>
          </div>

          <div id="positionsList" class="positions-grid"></div>
        </div>

        <!-- News Page -->
        <div class="page" id="news-page">
          <div class="page-header">
            <h1 data-i18n="news.title">News Feed</h1>
            <p data-i18n="news.subtitle">Latest crypto news with sentiment analysis</p>
          </div>

          <div class="filters">
            <select id="newsSentimentFilter">
              <option value="all" data-i18n="news.allSentiments">All Sentiments</option>
              <option value="POSITIVE" data-i18n="news.positive">Positive</option>
              <option value="NEUTRAL" data-i18n="news.neutral">Neutral</option>
              <option value="NEGATIVE" data-i18n="news.negative">Negative</option>
            </select>
          </div>

          <div id="newsFeed" class="news-feed"></div>
        </div>

        <!-- Analytics Page -->
        <div class="page" id="analytics-page">
          <div class="page-header">
            <h1 data-i18n="analytics.title">Analytics</h1>
            <p data-i18n="analytics.subtitle">Performance reports and statistics</p>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.totalTrades">Total Trades</div>
              <div class="stat-value" id="statTotalTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.winningTrades">Winning Trades</div>
              <div class="stat-value" id="statWinningTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.losingTrades">Losing Trades</div>
              <div class="stat-value" id="statLosingTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.winRate">Win Rate</div>
              <div class="stat-value" id="statWinRate">0%</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.avgWin">Average Win</div>
              <div class="stat-value" id="statAvgWin">$0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.avgLoss">Average Loss</div>
              <div class="stat-value" id="statAvgLoss">$0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.profitFactor">Profit Factor</div>
              <div class="stat-value" id="statProfitFactor">0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.sharpeRatio">Sharpe Ratio</div>
              <div class="stat-value" id="statSharpeRatio">0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.maxDrawdown">Max Drawdown</div>
              <div class="stat-value" id="statMaxDrawdown">0%</div>
            </div>
          </div>

          <div class="card">
            <h3 data-i18n="analytics.tradeHistory">Trade History</h3>
            <div id="tradeHistory" class="table-container"></div>
          </div>
        </div>

        <!-- Enhanced Strategy Chart Page -->
        <div class="page" id="chart-page">
          <div class="page-header">
            <h1 data-i18n="chart.title">Price Channel Strategy</h1>
            <p data-i18n="chart.subtitle">Real-time visualization of Price Channel Breakout algorithm</p>
          </div>

          <div class="enhanced-chart-layout">
            <!-- Left Panel: Order Book & Trades -->
            <div class="chart-left-panel">
              <div class="panel-tabs">
                <button class="panel-tab active" data-tab="orderbook">Order Book</button>
                <button class="panel-tab" data-tab="trades">Recent Trades</button>
                <button class="panel-tab" data-tab="depth">Depth</button>
              </div>

              <div class="panel-content active" id="orderbook-panel">
                <div id="orderbookContainer" class="orderbook-container"></div>
              </div>

              <div class="panel-content" id="trades-panel">
                <div id="recentTradesContainer" class="trades-container"></div>
              </div>

              <div class="panel-content" id="depth-panel">
                <canvas id="marketDepthChart" class="depth-chart"></canvas>
              </div>
            </div>

            <!-- Main Chart Area -->
            <div class="chart-center-panel">
              <div class="chart-toolbar">
                <div class="chart-toolbar-section">
                  <div class="chart-symbol">
                    <span class="symbol-name">BTC/USDT</span>
                    <span class="symbol-price" id="chartPrice">$50,000</span>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="timeframe-selector">
                    <button class="timeframe-btn" data-timeframe="1m">1m</button>
                    <button class="timeframe-btn" data-timeframe="5m">5m</button>
                    <button class="timeframe-btn" data-timeframe="15m">15m</button>
                    <button class="timeframe-btn active" data-timeframe="1h">1H</button>
                    <button class="timeframe-btn" data-timeframe="4h">4H</button>
                    <button class="timeframe-btn" data-timeframe="1D">1D</button>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="chart-type-selector">
                    <button class="chart-type-btn active" data-chart-type="candlestick" title="Candlestick">üìä</button>
                    <button class="chart-type-btn" data-chart-type="line" title="Line">üìà</button>
                    <button class="chart-type-btn" data-chart-type="area" title="Area">üóª</button>
                    <button class="chart-type-btn" data-chart-type="bars" title="Bars">üìâ</button>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="indicator-selector">
                    <button class="indicator-toggle" data-indicator="ma20">MA(20)</button>
                    <button class="indicator-toggle" data-indicator="ma50">MA(50)</button>
                    <button class="indicator-toggle" data-indicator="ema20">EMA(20)</button>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="chart-actions">
                    <button id="chartStart" class="btn-icon" title="Start">‚ñ∂</button>
                    <button id="chartPause" class="btn-icon" title="Pause">‚è∏</button>
                    <button id="chartReset" class="btn-icon" title="Reset">üîÑ</button>
                    <button id="chartFullscreen" class="btn-icon" title="Fullscreen">‚õ∂</button>
                  </div>
                </div>
              </div>

              <div id="tradingChartContainer" class="trading-chart-container"></div>
            </div>

            <!-- Right Panel: Info & Signals -->
            <div class="chart-right-panel">
              <div class="info-card">
                <h3 data-i18n="chart.currentState">Current State</h3>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.symbol">Symbol</span>
                  <span class="stat-value" id="chartSymbol">BTC/USDT</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.channelHigh">Channel High</span>
                  <span class="stat-value positive" id="chartChannelHigh">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.channelLow">Channel Low</span>
                  <span class="stat-value negative" id="chartChannelLow">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.channelWidth">Channel Width</span>
                  <span class="stat-value" id="chartChannelWidth">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.signal">Signal</span>
                  <span id="chartSignalStatus"><span class="badge badge-neutral">No Signal</span></span>
                </div>
              </div>

              <div class="info-card">
                <h3 data-i18n="chart.lastSignal">Last Signal</h3>
                <div id="chartLastSignal">
                  <p class="text-muted" data-i18n="chart.waitingForBreakout">Waiting for channel breakout...</p>
                </div>
              </div>

              <div class="info-card">
                <h3 data-i18n="chart.tradeHistory">Trade History</h3>
                <div id="chartTradeHistory" class="trade-history-list">
                  <p class="text-muted" data-i18n="chart.noTrades">No trades yet</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settings-page">
          <div class="page-header">
            <h1 data-i18n="settings.title">Settings</h1>
            <p data-i18n="settings.subtitle">Configure bot parameters and risk management</p>
          </div>

          <div class="settings-grid">
            <!-- Strategy Settings Panel -->
            <div class="card card-full-width" id="strategySettingsPanel">
              <h3 data-i18n="settings.strategyParameters">Strategy Parameters</h3>
              <div class="strategy-settings-panel">
                <div class="settings-header">
                  <div class="strategy-selector-group">
                    <label for="strategySelect" data-i18n="settings.selectStrategy">Select Strategy:</label>
                    <select id="strategySelect" class="strategy-select">
                      <option value="">Loading...</option>
                    </select>
                  </div>
                </div>

                <div class="settings-content" id="strategySettingsContent">
                  <!-- Dynamic form will be generated here -->
                </div>

                <div class="settings-actions">
                  <button id="applySettings" class="btn btn-primary">
                    <span data-i18n="settings.apply">Apply</span>
                  </button>
                  <button id="previewSettings" class="btn btn-secondary">
                    <span data-i18n="settings.preview">Preview</span>
                  </button>
                  <button id="resetSettings" class="btn btn-secondary">
                    <span data-i18n="settings.reset">Reset</span>
                  </button>
                  <button id="savePreset" class="btn btn-secondary">
                    <span data-i18n="settings.savePreset">Save Preset</span>
                  </button>
                  <button id="exportConfig" class="btn btn-secondary">
                    <span data-i18n="settings.export">Export</span>
                  </button>
                  <button id="importConfig" class="btn btn-secondary">
                    <span data-i18n="settings.import">Import</span>
                  </button>
                </div>

                <div class="settings-presets">
                  <h4 data-i18n="settings.savedPresets">Saved Presets</h4>
                  <div id="presetsList"></div>
                </div>
              </div>
            </div>

            <div class="card">
              <h3 data-i18n="settings.riskManagement">Risk Management</h3>
              <form id="riskSettingsForm">
                <div class="form-group">
                  <label data-i18n="settings.maxPositionSize">Max Position Size (%)</label>
                  <input type="number" id="maxPositionSize" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxPositions">Max Positions</label>
                  <input type="number" id="maxPositions" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxDailyLoss">Max Daily Loss (%)</label>
                  <input type="number" id="maxDailyLoss" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxTotalDrawdown">Max Total Drawdown (%)</label>
                  <input type="number" id="maxTotalDrawdown" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.defaultStopLoss">Default Stop Loss (%)</label>
                  <input type="number" id="defaultStopLoss" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.defaultTakeProfit">Default Take Profit (%)</label>
                  <input type="number" id="defaultTakeProfit" step="0.1" />
                </div>
                <div class="form-group">
                  <label>
                    <input type="checkbox" id="trailingStop" />
                    <span data-i18n="settings.trailingStop">Enable Trailing Stop</span>
                  </label>
                </div>
                <button type="submit" class="btn btn-primary" data-i18n="settings.saveRiskSettings">Save Risk Settings</button>
              </form>
            </div>

            <div class="card">
              <h3 data-i18n="settings.strategyConfiguration">Strategy Configuration</h3>
              <div id="strategiesList"></div>
            </div>

            <div class="card">
              <h3>Notification Settings</h3>
              <form id="notificationSettingsForm">
                <div class="form-group">
                  <label>
                    <input type="checkbox" id="desktopNotifications" />
                    <span>Enable Desktop Notifications</span>
                  </label>
                </div>
                <div class="form-group">
                  <label>
                    <input type="checkbox" id="audioNotifications" />
                    <span>Enable Audio Notifications</span>
                  </label>
                </div>
                <div class="form-group">
                  <label>Min Confidence for Notifications (%)</label>
                  <input type="number" id="minConfidenceNotifications" min="0" max="100" step="1" />
                </div>
                <button type="submit" class="btn btn-primary">Save Notification Settings</button>
              </form>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="/chart.js"></script>
    <script src="/chart-enhanced.js"></script>
    <script src="/orderbook.js"></script>
    <script src="/recent-trades.js"></script>
    <script src="/market-depth.js"></script>
    <script src="/preset-manager.js"></script>
    <script src="/strategy-settings.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
