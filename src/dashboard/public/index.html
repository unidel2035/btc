<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BTC Trading Bot Dashboard</title>
    <link rel="stylesheet" href="/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/i18next@23.7.11/i18next.min.js"></script>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  </head>
  <body>
    <div class="app">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <div class="logo">
          <h2>üìä Trading Bot</h2>
          <div class="language-switcher">
            <button id="langSwitcher" class="lang-btn" title="Switch language / –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫">
              <span id="currentLang">EN</span>
            </button>
          </div>
        </div>
        <nav class="nav">
          <a href="#dashboard" class="nav-item active" data-page="dashboard">
            <span class="icon">üìà</span>
            <span data-i18n="nav.dashboard">Dashboard</span>
          </a>
          <a href="#signals" class="nav-item" data-page="signals">
            <span class="icon">üì°</span>
            <span data-i18n="nav.signals">Signals</span>
          </a>
          <a href="#positions" class="nav-item" data-page="positions">
            <span class="icon">üíº</span>
            <span data-i18n="nav.positions">Positions</span>
          </a>
          <a href="#news" class="nav-item" data-page="news">
            <span class="icon">üì∞</span>
            <span data-i18n="nav.news">News Feed</span>
          </a>
          <a href="#analytics" class="nav-item" data-page="analytics">
            <span class="icon">üìä</span>
            <span data-i18n="nav.analytics">Analytics</span>
          </a>
          <a href="#chart" class="nav-item" data-page="chart">
            <span class="icon">üìà</span>
            <span data-i18n="nav.chart">Strategy Chart</span>
          </a>
          <a href="#settings" class="nav-item" data-page="settings">
            <span class="icon">‚öôÔ∏è</span>
            <span data-i18n="nav.settings">Settings</span>
          </a>
        </nav>
        <div class="sidebar-footer">
          <div class="connection-status">
            <span class="status-dot" id="wsStatus"></span>
            <span id="wsStatusText" data-i18n="status.connecting">Connecting...</span>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Dashboard Page -->
        <div class="page active" id="dashboard-page">
          <div class="page-header">
            <h1 data-i18n="dashboard.title">Dashboard</h1>
            <p data-i18n="dashboard.subtitle">Real-time overview of your trading bot performance</p>
          </div>

          <!-- Metrics Cards -->
          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.balance">Balance</div>
              <div class="metric-value" id="balance">$0.00</div>
              <div class="metric-change" id="balanceChange">+0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.equity">Equity</div>
              <div class="metric-value" id="equity">$0.00</div>
              <div class="metric-change" id="equityChange">+0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.pnl">PnL</div>
              <div class="metric-value" id="pnl">$0.00</div>
              <div class="metric-change" id="pnlPercent">0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.winRate">Win Rate</div>
              <div class="metric-value" id="winRate">0%</div>
              <div class="metric-change" id="totalTrades">0 <span data-i18n="metrics.totalTrades">trades</span></div>
            </div>
          </div>

          <!-- Charts -->
          <div class="charts-grid">
            <div class="chart-card">
              <h3 data-i18n="dashboard.equityChart">Equity Chart</h3>
              <canvas id="equityChart"></canvas>
            </div>
            <div class="chart-card">
              <h3 data-i18n="dashboard.openPositions">Open Positions</h3>
              <div id="dashboardPositions" class="positions-list"></div>
            </div>
          </div>

          <!-- Recent Signals -->
          <div class="card">
            <h3 data-i18n="dashboard.recentSignals">Recent Signals</h3>
            <div id="recentSignals" class="signals-list"></div>
          </div>
        </div>

        <!-- Signals Page -->
        <div class="page" id="signals-page">
          <div class="page-header">
            <h1 data-i18n="signals.title">Trading Signals</h1>
            <p data-i18n="signals.subtitle">Real-time signal feed from all strategies</p>
          </div>

          <div class="filters">
            <select id="signalTypeFilter">
              <option value="all" data-i18n="signals.allTypes">All Types</option>
              <option value="NEWS_MOMENTUM">News Momentum</option>
              <option value="SENTIMENT_SWING">Sentiment Swing</option>
              <option value="TECHNICAL">Technical</option>
              <option value="EVENT_DRIVEN">Event Driven</option>
            </select>
            <select id="signalActionFilter">
              <option value="all" data-i18n="signals.allActions">All Actions</option>
              <option value="BUY" data-i18n="signals.buy">Buy</option>
              <option value="SELL" data-i18n="signals.sell">Sell</option>
              <option value="HOLD" data-i18n="signals.hold">Hold</option>
            </select>
          </div>

          <div id="signalsList" class="signals-feed"></div>
        </div>

        <!-- Positions Page -->
        <div class="page" id="positions-page">
          <div class="page-header">
            <h1 data-i18n="positions.title">Positions</h1>
            <p data-i18n="positions.subtitle">Manage your open positions</p>
          </div>

          <div id="positionsList" class="positions-grid"></div>
        </div>

        <!-- News Page -->
        <div class="page" id="news-page">
          <div class="page-header">
            <h1 data-i18n="news.title">News Feed</h1>
            <p data-i18n="news.subtitle">Latest crypto news with sentiment analysis</p>
          </div>

          <div class="filters">
            <select id="newsSentimentFilter">
              <option value="all" data-i18n="news.allSentiments">All Sentiments</option>
              <option value="POSITIVE" data-i18n="news.positive">Positive</option>
              <option value="NEUTRAL" data-i18n="news.neutral">Neutral</option>
              <option value="NEGATIVE" data-i18n="news.negative">Negative</option>
            </select>
          </div>

          <div id="newsFeed" class="news-feed"></div>
        </div>

        <!-- Analytics Page -->
        <div class="page" id="analytics-page">
          <div class="page-header">
            <h1 data-i18n="analytics.title">Analytics</h1>
            <p data-i18n="analytics.subtitle">Performance reports and statistics</p>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.totalTrades">Total Trades</div>
              <div class="stat-value" id="statTotalTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.winningTrades">Winning Trades</div>
              <div class="stat-value" id="statWinningTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.losingTrades">Losing Trades</div>
              <div class="stat-value" id="statLosingTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.winRate">Win Rate</div>
              <div class="stat-value" id="statWinRate">0%</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.avgWin">Average Win</div>
              <div class="stat-value" id="statAvgWin">$0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.avgLoss">Average Loss</div>
              <div class="stat-value" id="statAvgLoss">$0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.profitFactor">Profit Factor</div>
              <div class="stat-value" id="statProfitFactor">0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.sharpeRatio">Sharpe Ratio</div>
              <div class="stat-value" id="statSharpeRatio">0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.maxDrawdown">Max Drawdown</div>
              <div class="stat-value" id="statMaxDrawdown">0%</div>
            </div>
          </div>

          <div class="card">
            <h3 data-i18n="analytics.tradeHistory">Trade History</h3>
            <div id="tradeHistory" class="table-container"></div>
          </div>
        </div>

        <!-- Strategy Chart Page -->
        <div class="page" id="chart-page">
          <div class="page-header">
            <h1 data-i18n="chart.title">Multi-Strategy Chart</h1>
            <p data-i18n="chart.subtitle">Real-time visualization and comparison of multiple trading strategies</p>
          </div>

          <!-- Strategy Selector -->
          <div class="card strategy-selector-card">
            <h3>Active Strategies</h3>
            <div class="strategy-selector">
              <label class="strategy-checkbox-label">
                <input type="checkbox" class="strategy-checkbox" data-strategy="price-channel" checked>
                <span class="strategy-color" style="background: #10b981"></span>
                <span>Price Channel Breakout</span>
              </label>
              <label class="strategy-checkbox-label">
                <input type="checkbox" class="strategy-checkbox" data-strategy="ema-crossover">
                <span class="strategy-color" style="background: #3b82f6"></span>
                <span>EMA Crossover</span>
              </label>
              <label class="strategy-checkbox-label">
                <input type="checkbox" class="strategy-checkbox" data-strategy="rsi">
                <span class="strategy-color" style="background: #f59e0b"></span>
                <span>RSI Strategy</span>
              </label>
            </div>
          </div>

          <div class="chart-layout">
            <div class="chart-main">
              <div class="chart-controls">
                <button id="chartStart" class="btn btn-primary">‚ñ∂ <span data-i18n="chart.start">Start</span></button>
                <button id="chartPause" class="btn btn-secondary">‚è∏ <span data-i18n="chart.pause">Pause</span></button>
                <button id="chartReset" class="btn btn-secondary">üîÑ <span data-i18n="chart.reset">Reset</span></button>
              </div>
              <div id="tradingChart" class="trading-chart"></div>
            </div>

            <div class="chart-sidebar">
              <div class="card">
                <h3 data-i18n="chart.currentState">Current State</h3>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.symbol">Symbol</span>
                  <span class="stat-value" id="chartSymbol">BTC/USDT</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.currentPrice">Current Price</span>
                  <span class="stat-value" id="chartPrice">$50,000</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.signal">Signals</span>
                  <span id="chartSignalStatus"><span class="badge badge-neutral">No Signals</span></span>
                </div>
              </div>

              <div class="card">
                <h3>Recent Signals</h3>
                <div id="chartLastSignals" class="signals-container">
                  <p class="text-muted">Waiting for signals...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Strategy Comparison Table -->
          <div class="card strategy-comparison-card">
            <h3>Strategy Performance Comparison</h3>
            <div class="strategy-comparison">
              <table class="comparison-table">
                <thead>
                  <tr>
                    <th>Strategy</th>
                    <th>Signals</th>
                    <th>Win Rate</th>
                    <th>P&L</th>
                    <th>Sharpe Ratio</th>
                  </tr>
                </thead>
                <tbody id="strategyMetrics">
                  <tr>
                    <td colspan="5" class="text-muted">No active strategies</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settings-page">
          <div class="page-header">
            <h1 data-i18n="settings.title">Settings</h1>
            <p data-i18n="settings.subtitle">Configure bot parameters and risk management</p>
          </div>

          <div class="settings-grid">
            <div class="card">
              <h3 data-i18n="settings.riskManagement">Risk Management</h3>
              <form id="riskSettingsForm">
                <div class="form-group">
                  <label data-i18n="settings.maxPositionSize">Max Position Size (%)</label>
                  <input type="number" id="maxPositionSize" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxPositions">Max Positions</label>
                  <input type="number" id="maxPositions" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxDailyLoss">Max Daily Loss (%)</label>
                  <input type="number" id="maxDailyLoss" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxTotalDrawdown">Max Total Drawdown (%)</label>
                  <input type="number" id="maxTotalDrawdown" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.defaultStopLoss">Default Stop Loss (%)</label>
                  <input type="number" id="defaultStopLoss" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.defaultTakeProfit">Default Take Profit (%)</label>
                  <input type="number" id="defaultTakeProfit" step="0.1" />
                </div>
                <div class="form-group">
                  <label>
                    <input type="checkbox" id="trailingStop" />
                    <span data-i18n="settings.trailingStop">Enable Trailing Stop</span>
                  </label>
                </div>
                <button type="submit" class="btn btn-primary" data-i18n="settings.saveRiskSettings">Save Risk Settings</button>
              </form>
            </div>

            <div class="card">
              <h3 data-i18n="settings.strategyConfiguration">Strategy Configuration</h3>
              <div id="strategiesList"></div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="/StrategyManager.js"></script>
    <script src="/strategies/BaseStrategy.js"></script>
    <script src="/strategies/PriceChannelStrategy.js"></script>
    <script src="/strategies/EMACrossoverStrategy.js"></script>
    <script src="/strategies/RSIStrategy.js"></script>
    <script src="/chart.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
