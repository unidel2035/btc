<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BTC Trading Bot Dashboard</title>
    <link rel="stylesheet" href="/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/i18next@23.7.11/i18next.min.js"></script>
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  </head>
  <body>
    <div class="app">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <div class="logo">
          <h2>üìä Trading Bot</h2>
          <div class="language-switcher">
            <button id="langSwitcher" class="lang-btn" title="Switch language / –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫">
              <span id="currentLang">EN</span>
            </button>
          </div>
        </div>
        <nav class="nav">
          <a href="#dashboard" class="nav-item active" data-page="dashboard">
            <span class="icon">üìà</span>
            <span data-i18n="nav.dashboard">Dashboard</span>
          </a>
          <a href="#signals" class="nav-item" data-page="signals">
            <span class="icon">üì°</span>
            <span data-i18n="nav.signals">Signals</span>
            <span id="newSignalsBadge" class="badge" style="display: none; margin-left: 8px; background: #e53e3e; color: white; border-radius: 10px; padding: 2px 6px; font-size: 0.75rem;">0</span>
          </a>
          <a href="#positions" class="nav-item" data-page="positions">
            <span class="icon">üíº</span>
            <span data-i18n="nav.positions">Positions</span>
          </a>
          <a href="#news" class="nav-item" data-page="news">
            <span class="icon">üì∞</span>
            <span data-i18n="nav.news">News Feed</span>
          </a>
          <a href="#analytics" class="nav-item" data-page="analytics">
            <span class="icon">üìä</span>
            <span data-i18n="nav.analytics">Analytics</span>
          </a>
          <a href="#chart" class="nav-item" data-page="chart">
            <span class="icon">üìà</span>
            <span data-i18n="nav.chart">Strategy Chart</span>
          </a>
          <a href="#screening" class="nav-item" data-page="screening">
            <span class="icon">üîç</span>
            <span data-i18n="nav.screening">Screening</span>
          </a>
          <a href="#backtest" class="nav-item" data-page="backtest">
            <span class="icon">üß™</span>
            <span data-i18n="nav.backtest">Backtesting</span>
          </a>
          <a href="#settings" class="nav-item" data-page="settings">
            <span class="icon">‚öôÔ∏è</span>
            <span data-i18n="nav.settings">Settings</span>
          </a>
        </nav>
        <div class="sidebar-footer">
          <div class="connection-status">
            <span class="status-dot" id="wsStatus"></span>
            <span id="wsStatusText" data-i18n="status.connecting">Connecting...</span>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Dashboard Page -->
        <div class="page active" id="dashboard-page">
          <div class="page-header">
            <h1 data-i18n="dashboard.title">Dashboard</h1>
            <p data-i18n="dashboard.subtitle">Real-time overview of your trading bot performance</p>
          </div>

          <!-- Metrics Cards -->
          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.balance">Balance</div>
              <div class="metric-value" id="balance">$0.00</div>
              <div class="metric-change" id="balanceChange">+0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.equity">Equity</div>
              <div class="metric-value" id="equity">$0.00</div>
              <div class="metric-change" id="equityChange">+0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.pnl">PnL</div>
              <div class="metric-value" id="pnl">$0.00</div>
              <div class="metric-change" id="pnlPercent">0.00%</div>
            </div>
            <div class="metric-card">
              <div class="metric-label" data-i18n="metrics.winRate">Win Rate</div>
              <div class="metric-value" id="winRate">0%</div>
              <div class="metric-change" id="totalTrades">0 <span data-i18n="metrics.totalTrades">trades</span></div>
            </div>
          </div>

          <!-- Charts -->
          <div class="charts-grid">
            <div class="chart-card">
              <h3 data-i18n="dashboard.equityChart">Equity Chart</h3>
              <canvas id="equityChart"></canvas>
            </div>
            <div class="chart-card">
              <h3 data-i18n="dashboard.openPositions">Open Positions</h3>
              <div id="dashboardPositions" class="positions-list"></div>
            </div>
          </div>

          <!-- Recent Signals -->
          <div class="card">
            <h3 data-i18n="dashboard.recentSignals">Recent Signals</h3>
            <div id="recentSignals" class="signals-list"></div>
          </div>
        </div>

        <!-- Signals Page -->
        <div class="page" id="signals-page">
          <div class="page-header">
            <h1 data-i18n="signals.title">Trading Signals</h1>
            <p data-i18n="signals.subtitle">Real-time signal feed from all strategies</p>
          </div>

          <div class="filters">
            <select id="signalTypeFilter">
              <option value="all" data-i18n="signals.allTypes">All Types</option>
              <option value="NEWS_MOMENTUM">News Momentum</option>
              <option value="SENTIMENT_SWING">Sentiment Swing</option>
              <option value="TECHNICAL">Technical</option>
              <option value="EVENT_DRIVEN">Event Driven</option>
            </select>
            <select id="signalActionFilter">
              <option value="all" data-i18n="signals.allActions">All Actions</option>
              <option value="BUY" data-i18n="signals.buy">Buy</option>
              <option value="SELL" data-i18n="signals.sell">Sell</option>
              <option value="HOLD" data-i18n="signals.hold">Hold</option>
            </select>
          </div>

          <div id="signalsList" class="signals-feed"></div>
        </div>

        <!-- Positions Page -->
        <div class="page" id="positions-page">
          <div class="page-header">
            <h1 data-i18n="positions.title">Positions</h1>
            <p data-i18n="positions.subtitle">Manage your open positions</p>
          </div>

          <div id="positionsList" class="positions-grid"></div>
        </div>

        <!-- News Page -->
        <div class="page" id="news-page">
          <div class="page-header">
            <h1 data-i18n="news.title">News Feed</h1>
            <p data-i18n="news.subtitle">Latest crypto news with sentiment analysis</p>
          </div>

          <div class="filters">
            <select id="newsSentimentFilter">
              <option value="all" data-i18n="news.allSentiments">All Sentiments</option>
              <option value="POSITIVE" data-i18n="news.positive">Positive</option>
              <option value="NEUTRAL" data-i18n="news.neutral">Neutral</option>
              <option value="NEGATIVE" data-i18n="news.negative">Negative</option>
            </select>
          </div>

          <div id="newsFeed" class="news-feed"></div>
        </div>

        <!-- Analytics Page -->
        <div class="page" id="analytics-page">
          <div class="page-header">
            <h1 data-i18n="analytics.title">Analytics</h1>
            <p data-i18n="analytics.subtitle">Performance reports and statistics</p>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.totalTrades">Total Trades</div>
              <div class="stat-value" id="statTotalTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.winningTrades">Winning Trades</div>
              <div class="stat-value" id="statWinningTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.losingTrades">Losing Trades</div>
              <div class="stat-value" id="statLosingTrades">0</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.winRate">Win Rate</div>
              <div class="stat-value" id="statWinRate">0%</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.avgWin">Average Win</div>
              <div class="stat-value" id="statAvgWin">$0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.avgLoss">Average Loss</div>
              <div class="stat-value" id="statAvgLoss">$0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.profitFactor">Profit Factor</div>
              <div class="stat-value" id="statProfitFactor">0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.sharpeRatio">Sharpe Ratio</div>
              <div class="stat-value" id="statSharpeRatio">0.00</div>
            </div>
            <div class="stat-card">
              <div class="stat-label" data-i18n="analytics.maxDrawdown">Max Drawdown</div>
              <div class="stat-value" id="statMaxDrawdown">0%</div>
            </div>
          </div>

          <div class="card">
            <h3 data-i18n="analytics.tradeHistory">Trade History</h3>
            <div id="tradeHistory" class="table-container"></div>
          </div>
        </div>

        <!-- Enhanced Strategy Chart Page -->
        <div class="page" id="chart-page">
          <div class="page-header">
            <h1 data-i18n="chart.title">Multi-Strategy Chart</h1>
            <p data-i18n="chart.subtitle">Real-time visualization and comparison of multiple trading strategies</p>
          </div>

          <!-- Strategy Selector -->
          <div class="card strategy-selector-card">
            <h3>Active Strategies</h3>
            <div class="strategy-selector">
              <label class="strategy-checkbox-label">
                <input type="checkbox" class="strategy-checkbox" data-strategy="price-channel" checked>
                <span class="strategy-color" style="background: #10b981"></span>
                <span>Price Channel Breakout</span>
              </label>
              <label class="strategy-checkbox-label">
                <input type="checkbox" class="strategy-checkbox" data-strategy="ema-crossover">
                <span class="strategy-color" style="background: #3b82f6"></span>
                <span>EMA Crossover</span>
              </label>
              <label class="strategy-checkbox-label">
                <input type="checkbox" class="strategy-checkbox" data-strategy="rsi">
                <span class="strategy-color" style="background: #f59e0b"></span>
                <span>RSI Strategy</span>
              </label>
            </div>
          </div>

          <div class="enhanced-chart-layout">
            <!-- Left Panel: Order Book & Trades -->
            <div class="chart-left-panel">
              <div class="panel-tabs">
                <button class="panel-tab active" data-tab="orderbook">Order Book</button>
                <button class="panel-tab" data-tab="trades">Recent Trades</button>
                <button class="panel-tab" data-tab="depth">Depth</button>
              </div>

              <div class="panel-content active" id="orderbook-panel">
                <div id="orderbookContainer" class="orderbook-container"></div>
              </div>

              <div class="panel-content" id="trades-panel">
                <div id="recentTradesContainer" class="trades-container"></div>
              </div>

              <div class="panel-content" id="depth-panel">
                <canvas id="marketDepthChart" class="depth-chart"></canvas>
              </div>
            </div>

            <!-- Main Chart Area -->
            <div class="chart-center-panel">
              <div class="chart-toolbar">
                <div class="chart-toolbar-section">
                  <div class="chart-symbol">
                    <select id="exchangeSelect" class="chart-select">
                      <option value="binance">Binance</option>
                      <option value="bybit">Bybit</option>
                      <option value="okx">OKX</option>
                    </select>
                    <select id="symbolSelect" class="chart-select">
                      <option value="BTC/USDT">BTC/USDT</option>
                      <option value="ETH/USDT">ETH/USDT</option>
                      <option value="SOL/USDT">SOL/USDT</option>
                      <option value="BNB/USDT">BNB/USDT</option>
                      <option value="XRP/USDT">XRP/USDT</option>
                    </select>
                    <span class="symbol-price" id="chartPrice">$50,000</span>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="timeframe-selector">
                    <button class="timeframe-btn" data-timeframe="1m">1m</button>
                    <button class="timeframe-btn" data-timeframe="5m">5m</button>
                    <button class="timeframe-btn" data-timeframe="15m">15m</button>
                    <button class="timeframe-btn active" data-timeframe="1h">1H</button>
                    <button class="timeframe-btn" data-timeframe="4h">4H</button>
                    <button class="timeframe-btn" data-timeframe="1D">1D</button>
                    <!-- Hidden select for compatibility with chart.js -->
                    <select id="timeframeSelect" style="display: none;">
                      <option value="1m">1m</option>
                      <option value="5m">5m</option>
                      <option value="15m">15m</option>
                      <option value="1h" selected>1h</option>
                      <option value="4h">4h</option>
                      <option value="1d">1d</option>
                    </select>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="chart-type-selector">
                    <button class="chart-type-btn active" data-chart-type="candlestick" title="Candlestick">üìä</button>
                    <button class="chart-type-btn" data-chart-type="line" title="Line">üìà</button>
                    <button class="chart-type-btn" data-chart-type="area" title="Area">üóª</button>
                    <button class="chart-type-btn" data-chart-type="bars" title="Bars">üìâ</button>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="indicator-selector">
                    <button class="indicator-toggle" data-indicator="ma20">MA(20)</button>
                    <button class="indicator-toggle" data-indicator="ma50">MA(50)</button>
                    <button class="indicator-toggle" data-indicator="ema20">EMA(20)</button>
                  </div>
                </div>

                <div class="chart-toolbar-section">
                  <div class="chart-actions">
                    <button id="chartStart" class="btn-icon" title="Start">‚ñ∂</button>
                    <button id="chartPause" class="btn-icon" title="Pause">‚è∏</button>
                    <button id="chartReset" class="btn-icon" title="Reset">üîÑ</button>
                    <button id="chartFullscreen" class="btn-icon" title="Fullscreen">‚õ∂</button>
                  </div>
                </div>
              </div>

              <div id="tradingChartContainer" class="trading-chart-container"></div>
            </div>

            <!-- Right Panel: Info & Signals -->
            <div class="chart-right-panel">
              <div class="info-card">
                <h3 data-i18n="chart.currentState">Current State</h3>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.symbol">Symbol</span>
                  <span class="stat-value" id="chartSymbol">BTC/USDT</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.channelHigh">Channel High</span>
                  <span class="stat-value positive" id="chartChannelHigh">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.channelLow">Channel Low</span>
                  <span class="stat-value negative" id="chartChannelLow">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.channelWidth">Channel Width</span>
                  <span class="stat-value" id="chartChannelWidth">-</span>
                </div>
                <div class="stat-row">
                  <span class="stat-label" data-i18n="chart.signal">Signal</span>
                  <span id="chartSignalStatus"><span class="badge badge-neutral">No Signal</span></span>
                </div>
              </div>

              <div class="info-card">
                <h3 data-i18n="chart.lastSignal">Last Signal</h3>
                <div id="chartLastSignal">
                  <p class="text-muted" data-i18n="chart.waitingForBreakout">Waiting for channel breakout...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Trade History -->
          <div class="info-card">
            <h3 data-i18n="chart.tradeHistory">Trade History</h3>
            <div id="chartTradeHistory" class="trade-history-list">
              <p class="text-muted" data-i18n="chart.noTrades">No trades yet</p>
            </div>
          </div>

          <!-- Strategy Comparison Table -->
          <div class="card strategy-comparison-card">
            <h3>Strategy Performance Comparison</h3>
            <div class="strategy-comparison">
              <table class="comparison-table">
                <thead>
                  <tr>
                    <th>Strategy</th>
                    <th>Signals</th>
                    <th>Win Rate</th>
                    <th>P&L</th>
                    <th>Sharpe Ratio</th>
                  </tr>
                </thead>
                <tbody id="strategyMetrics">
                  <tr>
                    <td colspan="5" class="text-muted">No active strategies</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Backtesting Page -->
        <div class="page" id="backtest-page">
          <div class="page-header">
            <h1 data-i18n="backtest.title">Strategy Backtesting</h1>
            <p data-i18n="backtest.subtitle">Test your strategies on historical data</p>
          </div>

          <!-- Backtest Controls -->
          <div class="card backtest-controls">
            <h3 data-i18n="backtest.settings">Backtest Settings</h3>
            <form id="backtestForm" class="backtest-form">
              <div class="form-row">
                <div class="form-group">
                  <label data-i18n="backtest.strategy">Strategy</label>
                  <select id="backtestStrategy" required>
                    <option value="price-channel">Price Channel Breakout</option>
                    <option value="news-momentum">News Momentum</option>
                    <option value="sentiment-swing">Sentiment Swing</option>
                  </select>
                </div>

                <div class="form-group">
                  <label data-i18n="backtest.period">Period</label>
                  <select id="backtestPeriod" required>
                    <option value="7d">Last 7 days</option>
                    <option value="30d">Last 30 days</option>
                    <option value="90d">Last 3 months</option>
                    <option value="1y">Last year</option>
                    <option value="custom">Custom period</option>
                  </select>
                </div>

                <div class="form-group">
                  <label data-i18n="backtest.symbol">Symbol</label>
                  <input type="text" id="backtestSymbol" value="BTC/USDT" required />
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label data-i18n="backtest.initialCapital">Initial Capital ($)</label>
                  <input type="number" id="backtestCapital" value="10000" min="100" step="100" required />
                </div>

                <div class="form-group">
                  <label data-i18n="backtest.positionSize">Position Size (%)</label>
                  <input type="number" id="backtestPositionSize" value="10" min="1" max="100" step="1" required />
                </div>

                <div class="form-group">
                  <label data-i18n="backtest.timeframe">Timeframe</label>
                  <select id="backtestTimeframe" required>
                    <option value="1m">1 minute</option>
                    <option value="5m">5 minutes</option>
                    <option value="15m">15 minutes</option>
                    <option value="1h" selected>1 hour</option>
                    <option value="4h">4 hours</option>
                    <option value="1d">1 day</option>
                  </select>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group">
                  <label data-i18n="backtest.fees">Trading Fees (%)</label>
                  <input type="number" id="backtestFees" value="0.1" min="0" max="1" step="0.01" required />
                </div>

                <div class="form-group">
                  <label data-i18n="backtest.slippage">Slippage (%)</label>
                  <input type="number" id="backtestSlippage" value="0.05" min="0" max="1" step="0.01" required />
                </div>

                <div class="form-group">
                  <label>
                    <input type="checkbox" id="backtestAllowShorts" />
                    <span data-i18n="backtest.allowShorts">Allow Short Positions</span>
                  </label>
                </div>
              </div>

              <div class="form-actions">
                <button type="submit" id="runBacktest" class="btn btn-primary">
                  <span data-i18n="backtest.run">Run Backtest</span>
                </button>
                <button type="button" id="exportBacktest" class="btn btn-secondary" disabled>
                  <span data-i18n="backtest.export">Export Results</span>
                </button>
              </div>
            </form>

            <div id="backtestProgress" class="backtest-progress" style="display: none;">
              <div class="progress-bar">
                <div class="progress-fill" id="backtestProgressBar"></div>
              </div>
              <div class="progress-text" id="backtestProgressText">Running backtest...</div>
            </div>
          </div>

          <!-- Backtest Results -->
          <div id="backtestResultsContainer" style="display: none;">
            <!-- Results Summary -->
            <div class="card">
              <h3 data-i18n="backtest.results">Backtest Results</h3>
              <div class="backtest-summary metrics-grid">
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.totalReturn">Total Return</div>
                  <div class="metric-value" id="btTotalReturn">+0.00%</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.winRate">Win Rate</div>
                  <div class="metric-value" id="btWinRate">0%</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.sharpeRatio">Sharpe Ratio</div>
                  <div class="metric-value" id="btSharpeRatio">0.00</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.maxDrawdown">Max Drawdown</div>
                  <div class="metric-value negative" id="btMaxDrawdown">-0.00%</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.profitFactor">Profit Factor</div>
                  <div class="metric-value" id="btProfitFactor">0.00</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.totalTrades">Total Trades</div>
                  <div class="metric-value" id="btTotalTrades">0</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.avgWin">Average Win</div>
                  <div class="metric-value positive" id="btAvgWin">+0.00%</div>
                </div>
                <div class="metric-card">
                  <div class="metric-label" data-i18n="backtest.avgLoss">Average Loss</div>
                  <div class="metric-value negative" id="btAvgLoss">-0.00%</div>
                </div>
              </div>
            </div>

            <!-- Equity Curve -->
            <div class="card">
              <h3 data-i18n="backtest.equityCurve">Equity Curve</h3>
              <canvas id="backtestEquityChart"></canvas>
            </div>

            <!-- Price Chart with Trades -->
            <div class="card">
              <h3 data-i18n="backtest.priceChart">Price Chart with Trades</h3>
              <div id="backtestPriceChart" class="backtest-chart-container"></div>
            </div>

            <!-- Trade List -->
            <div class="card">
              <h3 data-i18n="backtest.tradeList">Trade History</h3>
              <div class="table-container">
                <table id="backtestTradesTable" class="trades-table">
                  <thead>
                    <tr>
                      <th data-i18n="backtest.table.entry">Entry Time</th>
                      <th data-i18n="backtest.table.exit">Exit Time</th>
                      <th data-i18n="backtest.table.direction">Direction</th>
                      <th data-i18n="backtest.table.entryPrice">Entry Price</th>
                      <th data-i18n="backtest.table.exitPrice">Exit Price</th>
                      <th data-i18n="backtest.table.quantity">Quantity</th>
                      <th data-i18n="backtest.table.pnl">P&L</th>
                      <th data-i18n="backtest.table.pnlPercent">P&L %</th>
                      <th data-i18n="backtest.table.reason">Exit Reason</th>
                    </tr>
                  </thead>
                  <tbody id="backtestTradesBody"></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settings-page">
          <div class="page-header">
            <h1 data-i18n="settings.title">Settings</h1>
            <p data-i18n="settings.subtitle">Configure bot parameters and risk management</p>
          </div>

          <div class="settings-grid">
            <!-- Strategy Settings Panel -->
            <div class="card card-full-width" id="strategySettingsPanel">
              <h3 data-i18n="settings.strategyParameters">Strategy Parameters</h3>
              <div class="strategy-settings-panel">
                <div class="settings-header">
                  <div class="strategy-selector-group">
                    <label for="strategySelect" data-i18n="settings.selectStrategy">Select Strategy:</label>
                    <select id="strategySelect" class="strategy-select">
                      <option value="">Loading...</option>
                    </select>
                  </div>
                </div>

                <div class="settings-content" id="strategySettingsContent">
                  <!-- Dynamic form will be generated here -->
                </div>

                <div class="settings-actions">
                  <button id="applySettings" class="btn btn-primary">
                    <span data-i18n="settings.apply">Apply</span>
                  </button>
                  <button id="previewSettings" class="btn btn-secondary">
                    <span data-i18n="settings.preview">Preview</span>
                  </button>
                  <button id="resetSettings" class="btn btn-secondary">
                    <span data-i18n="settings.reset">Reset</span>
                  </button>
                  <button id="savePreset" class="btn btn-secondary">
                    <span data-i18n="settings.savePreset">Save Preset</span>
                  </button>
                  <button id="exportConfig" class="btn btn-secondary">
                    <span data-i18n="settings.export">Export</span>
                  </button>
                  <button id="importConfig" class="btn btn-secondary">
                    <span data-i18n="settings.import">Import</span>
                  </button>
                </div>

                <div class="settings-presets">
                  <h4 data-i18n="settings.savedPresets">Saved Presets</h4>
                  <div id="presetsList"></div>
                </div>
              </div>
            </div>

            <div class="card">
              <h3 data-i18n="settings.riskManagement">Risk Management</h3>
              <form id="riskSettingsForm">
                <div class="form-group">
                  <label data-i18n="settings.maxPositionSize">Max Position Size (%)</label>
                  <input type="number" id="maxPositionSize" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxPositions">Max Positions</label>
                  <input type="number" id="maxPositions" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxDailyLoss">Max Daily Loss (%)</label>
                  <input type="number" id="maxDailyLoss" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.maxTotalDrawdown">Max Total Drawdown (%)</label>
                  <input type="number" id="maxTotalDrawdown" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.defaultStopLoss">Default Stop Loss (%)</label>
                  <input type="number" id="defaultStopLoss" step="0.1" />
                </div>
                <div class="form-group">
                  <label data-i18n="settings.defaultTakeProfit">Default Take Profit (%)</label>
                  <input type="number" id="defaultTakeProfit" step="0.1" />
                </div>
                <div class="form-group">
                  <label>
                    <input type="checkbox" id="trailingStop" />
                    <span data-i18n="settings.trailingStop">Enable Trailing Stop</span>
                  </label>
                </div>
                <button type="submit" class="btn btn-primary" data-i18n="settings.saveRiskSettings">Save Risk Settings</button>
              </form>
            </div>

            <div class="card">
              <h3 data-i18n="settings.strategyConfiguration">Strategy Configuration</h3>
              <div id="strategiesList"></div>
            </div>

            <div class="card">
              <h3>Notification Settings</h3>
              <form id="notificationSettingsForm">
                <div class="form-group">
                  <label>
                    <input type="checkbox" id="desktopNotifications" />
                    <span>Enable Desktop Notifications</span>
                  </label>
                </div>
                <div class="form-group">
                  <label>
                    <input type="checkbox" id="audioNotifications" />
                    <span>Enable Audio Notifications</span>
                  </label>
                </div>
                <div class="form-group">
                  <label>Min Confidence for Notifications (%)</label>
                  <input type="number" id="minConfidenceNotifications" min="0" max="100" step="1" />
                </div>
                <button type="submit" class="btn btn-primary">Save Notification Settings</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Screening Page -->
        <div class="page" id="screening-page">
          <div class="page-header">
            <h1 data-i18n="screening.title">Cryptocurrency Screening</h1>
            <p data-i18n="screening.subtitle">AI-powered market analysis and project selection</p>
          </div>

          <!-- Control Panel -->
          <div class="card">
            <h3 data-i18n="screening.controlPanel">Screening Control Panel</h3>
            <div class="screening-controls">
              <button id="runScreening" class="btn btn-primary">
                <span data-i18n="screening.runScreening">üöÄ Run Screening</span>
              </button>
              <button id="exportScreeningJSON" class="btn btn-secondary" disabled>
                <span data-i18n="screening.exportJSON">üì• Export JSON</span>
              </button>
              <button id="exportScreeningMarkdown" class="btn btn-secondary" disabled>
                <span data-i18n="screening.exportMarkdown">üìù Export Markdown</span>
              </button>
              <button id="copyTradingPairs" class="btn btn-secondary" disabled>
                <span data-i18n="screening.copyPairs">üìã Copy Trading Pairs</span>
              </button>
            </div>

            <!-- Progress Indicator -->
            <div id="screeningProgress" class="screening-progress" style="display: none;">
              <div class="progress-bar">
                <div class="progress-fill" id="screeningProgressBar"></div>
              </div>
              <div class="progress-stages">
                <div class="stage" id="stage0"><span>Stage 0:</span> Macro Filter</div>
                <div class="stage" id="stage1"><span>Stage 1:</span> Quantitative</div>
                <div class="stage" id="stage2"><span>Stage 2:</span> Scoring</div>
                <div class="stage" id="stage3"><span>Stage 3:</span> Portfolio</div>
              </div>
              <div class="progress-text" id="screeningProgressText">Initializing...</div>
            </div>

            <!-- Status Info -->
            <div class="screening-status">
              <div class="stat-row">
                <span class="stat-label" data-i18n="screening.lastRun">Last Run:</span>
                <span class="stat-value" id="lastScreeningTime">Never</span>
              </div>
              <div class="stat-row">
                <span class="stat-label" data-i18n="screening.duration">Duration:</span>
                <span class="stat-value" id="screeningDuration">-</span>
              </div>
              <div class="stat-row">
                <span class="stat-label" data-i18n="screening.projectsFound">Projects Found:</span>
                <span class="stat-value" id="projectsFound">0</span>
              </div>
            </div>
          </div>

          <!-- Results Section -->
          <div id="screeningResults" style="display: none;">
            <!-- Project Cards -->
            <div class="card">
              <h3 data-i18n="screening.recommendations">üìä Recommended Projects</h3>
              <div id="projectCards" class="projects-grid"></div>
            </div>

            <!-- Detailed Statistics -->
            <div class="card">
              <h3 data-i18n="screening.detailedStats">üìà Detailed Statistics</h3>
              <div class="screening-stats">
                <div class="stat-card">
                  <div class="stat-label">Sectors Analyzed</div>
                  <div class="stat-value" id="sectorsAnalyzed">0</div>
                </div>
                <div class="stat-card">
                  <div class="stat-label">Projects Screened</div>
                  <div class="stat-value" id="projectsScreened">0</div>
                </div>
                <div class="stat-card">
                  <div class="stat-label">Selected Sectors</div>
                  <div class="stat-value" id="selectedSectorsCount">0</div>
                </div>
                <div class="stat-card">
                  <div class="stat-label">Report Date</div>
                  <div class="stat-value" id="reportDate">-</div>
                </div>
              </div>

              <!-- Candidates Table -->
              <h4 style="margin-top: 2rem;">All Candidates</h4>
              <div class="table-container">
                <table id="candidatesTable" class="trades-table">
                  <thead>
                    <tr>
                      <th>Rank</th>
                      <th>Ticker</th>
                      <th>Name</th>
                      <th>Sector</th>
                      <th>Score</th>
                      <th>Risk</th>
                      <th>Market Cap</th>
                      <th>Volume 24h</th>
                    </tr>
                  </thead>
                  <tbody id="candidatesTableBody"></tbody>
                </table>
              </div>
            </div>

            <!-- Macro Analysis -->
            <div class="card">
              <h3 data-i18n="screening.macroAnalysis">üåê Macro Analysis</h3>

              <!-- Selected Sectors -->
              <h4>Selected Sectors</h4>
              <div id="selectedSectors" class="sectors-grid"></div>

              <!-- Macro Risks -->
              <h4 style="margin-top: 2rem;">Macro Risks</h4>
              <div id="macroRisks" class="risks-list"></div>
            </div>

            <!-- Next Actions -->
            <div class="card">
              <h3 data-i18n="screening.nextActions">‚úÖ Next Actions</h3>
              <div id="nextActions" class="actions-list"></div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="/StrategyManager.js"></script>
    <script src="/strategies/BaseStrategy.js"></script>
    <script src="/strategies/PriceChannelStrategy.js"></script>
    <script src="/strategies/EMACrossoverStrategy.js"></script>
    <script src="/strategies/RSIStrategy.js"></script>
    <script src="/chart.js"></script>
    <script src="/chart-enhanced.js"></script>
    <script src="/orderbook.js"></script>
    <script src="/recent-trades.js"></script>
    <script src="/market-depth.js"></script>
    <script src="/preset-manager.js"></script>
    <script src="/strategy-settings.js"></script>
    <script src="/backtest.js"></script>
    <script src="/screening.js"></script>
    <script src="/app.js"></script>
  </body>
</html>
