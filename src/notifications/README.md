# –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Notifications)

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –≥–∏–±–∫—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–ö–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π](#–∫–∞–Ω–∞–ª—ã-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- [–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π](#—Ç–∏–ø—ã-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [API Reference](#api-reference)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [Telegram Bot](#telegram-bot)
- [–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π](#—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- [–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è](#—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞-–∏-–∏—Å—Ç–æ—Ä–∏—è)

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö —á–µ—Ä–µ–∑ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–∞–Ω–∞–ª—ã:

- **Telegram** - —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
- **Email** - —á–µ—Ä–µ–∑ SMTP –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ API (SendGrid, Mailgun)
- **Discord** - —á–µ—Ä–µ–∑ webhooks
- **Push** - Web Push API –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **Console** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üîî **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- üéØ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Å–∏–º–≤–æ–ª—É
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- üìú **–ò—Å—Ç–æ—Ä–∏—è** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ü§ñ **Telegram –∫–æ–º–∞–Ω–¥—ã** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –±–æ—Ç —Å –∫–æ–º–∞–Ω–¥–∞–º–∏
- ‚öôÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–æ

## –ö–∞–Ω–∞–ª—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### Console

–í—ã–≤–æ–¥ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –∫–æ–Ω—Å–æ–ª—å —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —Ü–≤–µ—Ç–∞–º–∏.

```typescript
console: {
  enabled: true,
  minImportance: NotificationImportance.LOW
}
```

### Telegram

–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞.

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
- `TELEGRAM_CHAT_ID` - ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**
- `/status` - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
- `/balance` - –ë–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞
- `/positions` - –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- `/pnl` - –ü—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫
- `/stop` - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é
- `/start` - –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é

### Email

–û—Ç–ø—Ä–∞–≤–∫–∞ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ SMTP –∏–ª–∏ API (SendGrid).

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `SENDGRID_API_KEY` - API –∫–ª—é—á SendGrid (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `EMAIL_USER` - SMTP –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `EMAIL_PASSWORD` - SMTP –ø–∞—Ä–æ–ª—å

### Discord

–û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Discord webhook.

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
- `DISCORD_WEBHOOK_URL` - URL webhook'–∞ Discord –∫–∞–Ω–∞–ª–∞

### Push

Web Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤.

## –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –¢–æ—Ä–≥–æ–≤—ã–µ (Trading)

- `POSITION_OPENED` - –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- `POSITION_CLOSED` - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (—Å PnL)
- `STOP_LOSS_TRIGGERED` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ stop-loss
- `TAKE_PROFIT_TRIGGERED` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ take-profit
- `LIQUIDATION` - –õ–∏–∫–≤–∏–¥–∞—Ü–∏—è (futures)

### –°–∏–≥–Ω–∞–ª—ã (Signal)

- `NEWS_SIGNAL` - –í–∞–∂–Ω—ã–π –Ω–æ–≤–æ—Å—Ç–Ω–æ–π —Å–∏–≥–Ω–∞–ª
- `SOCIAL_ANOMALY` - –ê–Ω–æ–º–∞–ª—å–Ω–∞—è —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- `WHALE_ALERT` - Whale alert

### –†–∏—Å–∫ (Risk)

- `DAILY_LIMIT_WARNING` - –ü—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∫ –¥–Ω–µ–≤–Ω–æ–º—É –ª–∏–º–∏—Ç—É
- `DRAWDOWN_WARNING` - –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ drawdown
- `HIGH_VOLATILITY` - –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å

### –°–∏—Å—Ç–µ–º–∞ (System)

- `EXCHANGE_ERROR` - –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∏—Ä–∂–µ
- `SERVICE_FAILURE` - –°–±–æ–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- `BOT_RESTART` - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –î–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:

```bash
# –î–ª—è email —á–µ—Ä–µ–∑ nodemailer (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm install nodemailer @types/nodemailer

# –î–ª—è Web Push (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm install web-push @types/web-push
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```typescript
import { NotificationManager, NotificationImportance } from './notifications/index.js';

// –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
const manager = new NotificationManager({
  enabled: true,
  console: {
    enabled: true,
    minImportance: NotificationImportance.LOW,
  },
  telegram: {
    enabled: true,
    botToken: process.env.TELEGRAM_BOT_TOKEN!,
    chatId: process.env.TELEGRAM_CHAT_ID!,
    minImportance: NotificationImportance.MEDIUM,
  },
});

// –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏
await manager.notifyPositionOpened({
  symbol: 'BTCUSDT',
  side: 'long',
  entryPrice: 45000,
  size: 0.1,
  stopLoss: 44000,
  takeProfit: 47000,
});
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```typescript
interface NotificationConfig {
  enabled: boolean;

  console?: {
    enabled: boolean;
    minImportance: NotificationImportance;
  };

  telegram?: {
    enabled: boolean;
    botToken: string;
    chatId: string;
    minImportance: NotificationImportance;
  };

  email?: {
    enabled: boolean;
    smtp: {
      host: string;
      port: number;
      secure: boolean;
      user: string;
      password: string;
      from: string;
    };
    recipients: string[];
    minImportance: NotificationImportance;
  };

  discord?: {
    enabled: boolean;
    webhookUrl: string;
    username?: string;
    avatarUrl?: string;
    minImportance: NotificationImportance;
  };

  push?: {
    enabled: boolean;
    endpoint: string;
    publicKey: string;
    privateKey: string;
    minImportance: NotificationImportance;
  };

  filters?: NotificationFilter[];
}
```

### –£—Ä–æ–≤–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏

```typescript
enum NotificationImportance {
  LOW = 'low',        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
  MEDIUM = 'medium',  // –û–±—ã—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
  HIGH = 'high',      // –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
  CRITICAL = 'critical' // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
}
```

## API Reference

### NotificationManager

#### –ú–µ—Ç–æ–¥—ã

```typescript
// –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ—Ç–ø—Ä–∞–≤–∫–∏
send(notification: Notification): Promise<NotificationResult[]>
sendTest(): Promise<NotificationResult[]>

// –¢–æ—Ä–≥–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
notifyPositionOpened(data: PositionData): Promise<NotificationResult[]>
notifyPositionClosed(data: PositionData): Promise<NotificationResult[]>
notifyStopLoss(data: PositionData): Promise<NotificationResult[]>
notifyTakeProfit(data: PositionData): Promise<NotificationResult[]>

// –°–∏–≥–Ω–∞–ª—ã
notifyNewsSignal(symbol: string, message: string, data?: object): Promise<NotificationResult[]>
notifyWhaleAlert(symbol: string, message: string, data?: object): Promise<NotificationResult[]>

// –†–∏—Å–∫–∏
notifyDailyLimit(currentValue: number, limitValue: number): Promise<NotificationResult[]>
notifyDrawdown(currentDrawdown: number, maxDrawdown: number): Promise<NotificationResult[]>

// –°–∏—Å—Ç–µ–º–∞
notifySystem(type: NotificationType, title: string, message: string, importance?: NotificationImportance, data?: object): Promise<NotificationResult[]>

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
setEnabled(enabled: boolean): void
isEnabled(): boolean
updateConfig(newConfig: Partial<NotificationConfig>): void

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è
getStats(): NotificationStats
getHistory(limit?: number): Notification[]
clearHistory(): void

// –ö–∞–Ω–∞–ª—ã
getChannel<T>(channelType: NotificationChannel): T | undefined
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```typescript
const manager = new NotificationManager({
  enabled: true,
  console: {
    enabled: true,
    minImportance: NotificationImportance.LOW,
  },
});

await manager.sendTest();
```

### –ü—Ä–∏–º–µ—Ä 2: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–∑–∏—Ü–∏–∏

```typescript
// –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
await manager.notifyPositionOpened({
  symbol: 'BTCUSDT',
  side: 'long',
  entryPrice: 45000,
  size: 0.1,
  stopLoss: 44000,
  takeProfit: 47000,
});

// –ó–∞–∫—Ä—ã—Ç–∏–µ —Å –ø—Ä–∏–±—ã–ª—å—é
await manager.notifyPositionClosed({
  symbol: 'BTCUSDT',
  side: 'long',
  entryPrice: 45000,
  exitPrice: 46500,
  size: 0.1,
  pnl: 150,
  pnlPercent: 3.33,
  duration: 3600000, // 1 —á–∞—Å
});
```

### –ü—Ä–∏–º–µ—Ä 3: –†–∏—Å–∫-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```typescript
// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –¥–Ω–µ–≤–Ω–æ–º –ª–∏–º–∏—Ç–µ
await manager.notifyDailyLimit(4.5, 5.0);

// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –ø—Ä–æ—Å–∞–¥–∫–µ
await manager.notifyDrawdown(18.5, 20.0);
```

### –ü—Ä–∏–º–µ—Ä 4: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã

```typescript
const manager = new NotificationManager({
  enabled: true,
  console: {
    enabled: true,
    minImportance: NotificationImportance.LOW,
  },
  telegram: {
    enabled: true,
    botToken: process.env.TELEGRAM_BOT_TOKEN!,
    chatId: process.env.TELEGRAM_CHAT_ID!,
    minImportance: NotificationImportance.MEDIUM,
  },
  discord: {
    enabled: true,
    webhookUrl: process.env.DISCORD_WEBHOOK_URL!,
    username: 'Trading Bot',
    minImportance: NotificationImportance.HIGH,
  },
});

// –ë—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã —Å–æ–≥–ª–∞—Å–Ω–æ –∏—Ö minImportance
await manager.notifyPositionOpened({
  symbol: 'BTCUSDT',
  side: 'long',
  entryPrice: 45000,
  size: 0.1,
});
```

## Telegram Bot

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –≤ Telegram
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
3. –ü–æ–ª—É—á–∏—Ç–µ chat ID (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ @userinfobot)
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id
```

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```
/status - –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞
/balance - –ë–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞
/positions - –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
/pnl - –ü—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥
/stop - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é
/start - –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é
/help - –ü–æ–º–æ—â—å
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ custom –∫–æ–º–∞–Ω–¥

```typescript
const telegramChannel = manager.getChannel<TelegramChannel>(NotificationChannel.TELEGRAM);

if (telegramChannel) {
  telegramChannel.registerCommand('/balance', async () => {
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
    const balance = await getBalance();
    return `üí∞ Balance: $${balance.toFixed(2)}`;
  });

  // –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
  await telegramChannel.startCommandListener();
}
```

### Webhook vs Polling

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è polling. –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è webhook:

```typescript
const telegramChannel = manager.getChannel<TelegramChannel>(NotificationChannel.TELEGRAM);

if (telegramChannel) {
  await telegramChannel.setWebhook('https://your-domain.com/telegram-webhook');
}
```

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –§–∏–ª—å—Ç—Ä –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏

```typescript
const manager = new NotificationManager({
  enabled: true,
  telegram: {
    enabled: true,
    botToken: process.env.TELEGRAM_BOT_TOKEN!,
    chatId: process.env.TELEGRAM_CHAT_ID!,
    minImportance: NotificationImportance.HIGH, // –¢–æ–ª—å–∫–æ HIGH –∏ CRITICAL
  },
});
```

### –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–∏–ø—É

```typescript
const manager = new NotificationManager({
  enabled: true,
  console: {
    enabled: true,
    minImportance: NotificationImportance.LOW,
  },
  filters: [
    {
      // –¢–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫-—Å–æ–±—ã—Ç–∏—è
      category: NotificationCategory.RISK,
      importance: NotificationImportance.CRITICAL,
    },
    {
      // –í—Å–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è —Å—Ä–µ–¥–Ω–µ–π –∏ –≤—ã—Å–æ–∫–æ–π –≤–∞–∂–Ω–æ—Å—Ç–∏
      category: NotificationCategory.TRADING,
      importance: [NotificationImportance.MEDIUM, NotificationImportance.HIGH],
    },
  ],
});
```

### –§–∏–ª—å—Ç—Ä –ø–æ —Å–∏–º–≤–æ–ª—É

```typescript
const manager = new NotificationManager({
  enabled: true,
  console: { enabled: true, minImportance: NotificationImportance.LOW },
  filters: [
    {
      // –¢–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è BTC –∏ ETH
      symbol: ['BTCUSDT', 'ETHUSDT'],
    },
  ],
});
```

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

```typescript
filters: [
  {
    // BTC –ø–æ–∑–∏—Ü–∏–∏ —Å—Ä–µ–¥–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏
    symbol: 'BTCUSDT',
    category: NotificationCategory.TRADING,
    importance: NotificationImportance.MEDIUM,
  },
  {
    // –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    importance: NotificationImportance.CRITICAL,
  },
]
```

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```typescript
const stats = manager.getStats();

console.log('Total sent:', stats.total);
console.log('Failed:', stats.failed);
console.log('By channel:', stats.byChannel);
console.log('By importance:', stats.byImportance);
console.log('By category:', stats.byCategory);
console.log('Last sent:', stats.lastSent);
```

### –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```typescript
// –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const recent = manager.getHistory(10);

recent.forEach(notification => {
  console.log(`[${notification.importance}] ${notification.title}`);
  console.log(`  ${notification.message}`);
});

// –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
manager.clearHistory();
```

## Best Practices

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏

```typescript
// LOW - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–ª–æ–≥–∏, —Å—Ç–∞—Ç—É—Å—ã)
NotificationImportance.LOW

// MEDIUM - –û–±—ã—á–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è (–æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π)
NotificationImportance.MEDIUM

// HIGH - –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (stop-loss, —Å–∏–≥–Ω–∞–ª—ã)
NotificationImportance.HIGH

// CRITICAL - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤, –æ—à–∏–±–∫–∏)
NotificationImportance.CRITICAL
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤

```typescript
{
  console: {
    enabled: true,
    minImportance: NotificationImportance.LOW, // –í—Å–µ –≤ –∫–æ–Ω—Å–æ–ª—å
  },
  telegram: {
    enabled: true,
    minImportance: NotificationImportance.HIGH, // –¢–æ–ª—å–∫–æ –≤–∞–∂–Ω–æ–µ –≤ Telegram
  },
  email: {
    enabled: true,
    minImportance: NotificationImportance.CRITICAL, // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞ email
  }
}
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤

```typescript
// –û—Ç–¥–µ–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const tradingNotifications = new NotificationManager({
  enabled: true,
  telegram: { /* ... */ },
  filters: [{ category: NotificationCategory.TRADING }],
});

// –û—Ç–¥–µ–ª—å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∏—Å–∫–æ–≤
const riskNotifications = new NotificationManager({
  enabled: true,
  email: { /* ... */ },
  filters: [{ category: NotificationCategory.RISK }],
});
```

### 4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏

```typescript
try {
  const results = await manager.notifyPositionOpened(data);

  const failed = results.filter(r => !r.success);
  if (failed.length > 0) {
    console.error('Failed to send notifications:', failed);
  }
} catch (error) {
  console.error('Notification error:', error);
}
```

### 5. –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```typescript
// –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ production
await manager.sendTest();

// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –∫–∞–Ω–∞–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç
const testResults = await manager.sendTest();
console.log('Working channels:', testResults.filter(r => r.success).length);
```

## Troubleshooting

### Telegram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ chat ID
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —á–∞—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ minImportance
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã

### Email –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. –î–ª—è Gmail –≤–∫–ª—é—á–∏—Ç–µ "Less secure app access"
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Password –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SendGrid API –∫–ª—é—á (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### Discord webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL webhook'–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook –∞–∫—Ç–∏–≤–µ–Ω –≤ Discord
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## –ü—Ä–∏–º–µ—Ä—ã

–ü–æ–ª–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–∏–º–µ—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `examples/notifications-example.ts`:

```bash
npm run example:notifications
```

## –¢–µ—Å—Ç—ã

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
npm run test:notifications
```

## License

MIT
